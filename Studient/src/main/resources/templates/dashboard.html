<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="description" content="">
	<meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
	<meta name="generator" content="Hugo 0.84.0">
	<title>Studient</title>
	<link rel="stylesheet" href="/webjars/bootstrap/5.0.0/css/bootstrap.min.css">
	<link href="https://fonts.googleapis.com/css2?family=Barlow&display=swap" rel="stylesheet">
	<link href="/css/dashboard.css" rel="stylesheet">
	<link rel="shortcut icon" type="image/png" href="/images/logo_mdai.png" />



	<style>
		.bd-placeholder-img {
			font-size: 1.125rem;
			text-anchor: middle;
			-webkit-user-select: none;
			-moz-user-select: none;
			user-select: none;
		}
		
		#timer {
            font-size: 24px;
        }

		@media (min-width: 768px) {
			.bd-placeholder-img-lg {
				font-size: 3.5rem;
			}
		}
	</style>


	<!-- Custom styles for this template -->
	<link href="dashboard.css" rel="stylesheet">
</head>

<body>

	<!-- Incluir el fragmento en la página -->
	<div th:replace="../static/fragments/header.html"></div>

	<div class="container-fluid">
		<div class="row" style="flex: 1">
			<nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light height sidebar collapse">
				<h2 class="folder_title">Carpetas</h2>
				<div class="position-sticky pt-3 scroll">
					<div th:if="${#lists.isEmpty(carpetas)}">
						<h5>No hay carpetas</h5>
					</div>
					<div th:if="${not #lists.isEmpty(carpetas)}">
						<ul class="nav flex-column">
							<li class="nav-item" th:each="carpeta : ${carpetas}">
								<a class="nav-link active position" aria-current="page" href="#">
									<p th:text="${carpeta.nombre}"></p>
									<p>CarpetaPrueba</p>
									<p>CarpetaPrueba1</p>
								</a>
							</li>
						</ul>
					</div>

				</div>
				<hr class="horizontal-line">
				<div>
					<a class="nav-link active position" style="margin-left: 1rem; padding-top: 0;" href="#">
						<svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user-circle"
							width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#0d6efd" fill="none"
							stroke-linecap="round" stroke-linejoin="round">
							<path stroke="none" d="M0 0h24v24H0z" fill="none" />
							<path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" />
							<path d="M12 10m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
							<path d="M6.168 18.849a4 4 0 0 1 3.832 -2.849h4a4 4 0 0 1 3.834 2.855" />
						</svg>
						<p style="display: inline;">Perfil</p>
					</a>
				</div>
			</nav>

			<main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
				<div
					class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
					<h1 class="h2">Dashboard</h1>
				</div>
				<div class="container">
					<div class="row">
				<div class="col-md-6">
    					<label for="timeInput">Tiempo (HH:MM:SS): </label>
    					<input type="text" id="timeInput" placeholder="00:00:00">
    					<button onclick="startTimer()">Iniciar</button>
    					<button onclick="stopTimer()">Detener</button>
    					<button onclick="resetTimer()">Reiniciar</button>
    					<p id="timer">00:00:00</p>
				</div>
				
				<div class="col-md-1 d-none d-md-block" style="border-right: 1px solid #ccc;"></div>
				
				<div class="col-md-5">
					<h2 class="section">Tareas</h2>
					<div th:if="${#lists.isEmpty(tareas)}">
						<h5>No hay tareas</h5>
					</div>
					<div th:if="${not #lists.isEmpty(tareas)}">

						<div class="table-responsive">
							<table class="table table-striped table-sm">
								<thead>
									<tr>
										<th scope="col">Prioridad</th>
										<th scope="col">Descripcion</th>
										<th scope="col">Estado</th>
										<th scope="col">Editar</th>
										<th scope="col">Eliminar</th>

									</tr>
								</thead>
								<tbody>
									<tr th:each="tarea : ${tareas}">
										<td th:text="${tarea.prioridad}"></td>
										<td th:text="${tarea.descripcion}"></td>
										<td th:text="${tarea.estado}"></td>
										<td><a th:href="@{/updateTarea/{id}(id=${tarea.id})}"
												class="btn btn-primary"><span class="fas fa-edit"></span></a></td>
										<td>
											<form action="#" th:action="@{/deleteTarea/{id}(id=${tarea.id})}"
												th:method="delete">
												<button type="submit" class="btn btn-danger">
													<span class="fas fa-trash"></span>
												</button>
											</form>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					</div>
				</div>
				</div>
			</main>

		</div>

	</div>



	<script src="/webjars/bootstrap/5.0.0/js/bootstrap.min.js"></script>

	<script src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js"
		integrity="sha384-uO3SXW5IuS1ZpFPKugNNWqTZRRglnUJK6UAZ/gxOX80nxEkN9NcGZTftn6RzhGWE"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"
		integrity="sha384-zNy6FEbO50N+Cg5wap8IKA4M/ZnLJgzc6w2NqACZaK0u0FXfOWRRJOnQtpZun8ha"
		crossorigin="anonymous"></script>
	<script src="dashboard.js"></script>
	
	<script>
    let timer;
    let totalSeconds = 0;
    let remainingSeconds = 0;

    function startTimer() {
        const inputTime = document.getElementById('timeInput').value;
        totalSeconds = parseTimeToSeconds(inputTime);

        if (!isNaN(totalSeconds) && totalSeconds > 0) {
			if (remainingSeconds == 0 ){
				remainingSeconds = totalSeconds;
			}
            updateTimerDisplay();
            timer = setInterval(updateTimer, 1000);
        } else {
            alert('Por favor, ingrese un tiempo válido en formato HH:MM:SS.');
        }
    }

    function stopTimer() {
        clearInterval(timer);
    }

    function resetTimer() {
        stopTimer();
        totalSeconds = 0;
        remainingSeconds = 0;
        document.getElementById('timeInput').value = '';
        updateTimerDisplay();
    }

    function updateTimer() {
        if (remainingSeconds > 0) {
            remainingSeconds--;
            updateTimerDisplay();
        } else {
            stopTimer();
            alert('¡Tiempo terminado!');
        }
    }

    function updateTimerDisplay() {
        const hours = Math.floor(remainingSeconds / 3600);
        const minutes = Math.floor((remainingSeconds % 3600) / 60);
        const seconds = remainingSeconds % 60;

        const formattedTime = `${padNumber(hours)}:${padNumber(minutes)}:${padNumber(seconds)}`;
        document.getElementById('timer').innerText = formattedTime;
    }

    function padNumber(number) {
        return number.toString().padStart(2, '0');
    }

    function parseTimeToSeconds(time) {
        const timeArray = time.split(':');
        const hours = parseInt(timeArray[0]) || 0;
        const minutes = parseInt(timeArray[1]) || 0;
        const seconds = parseInt(timeArray[2]) || 0;

        return hours * 3600 + minutes * 60 + seconds;
    }
</script>
</body>

</html>